plugins {
    id 'org.kordamp.gradle.guide'
    id 'org.ajoberstar.git-publish'
}

configurations {
    asciidoctorExtensions
}

dependencies {
    asciidoctorExtensions 'com.bmuschko:asciidoctorj-tabbed-code-extension:0.3'
}

asciidoctor {
    baseDirIsRootProjectDir()
    configurations 'asciidoctorExtensions'
    forkOptions {
      // Fix issue with JDK16+
      jvmArgs("--add-opens", "java.base/sun.nio.ch=ALL-UNNAMED", "--add-opens", "java.base/java.io=ALL-UNNAMED")
    }
    sources {
        include '*.adoc'
    }
    attributes = [
        'source-highlighter': 'prettify',
        'test-resources': 'plugins/riot/src/test/resources'
    ]
}
